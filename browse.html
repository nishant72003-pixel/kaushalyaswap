<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Browse Directory - Kaushalya Swap</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navbar -->
  <header>
    <nav class="navbar">
      <div class="logo">Kaushalya Swap</div>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="browse.html" class="active">Browse</a></li>
        <li><a href="get-started.html">Get Started</a></li>
      </ul>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1>Browse the Skill Directory</h1>
      <p>Find people to swap your skills with.</p>
      <button onclick="findMatches()">ðŸ”Ž Find My Matches</button>
    </div>
  </section>

  <!-- All Users Section -->
  <section class="directory">
    <h2>All Users</h2>
    <div id="userList" class="card-container"></div>
  </section>

  <!-- Matches Section -->
  <section class="directory">
    <h2>My Matches</h2>
    <div id="matchList" class="card-container"></div>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Kaushalya Swap. All Rights Reserved.</p>
  </footer>

  <script>
    // Load all users
    function loadUsers() {
      let users = JSON.parse(localStorage.getItem("users")) || [];
      let userList = document.getElementById("userList");
      userList.innerHTML = "";

      if (users.length === 0) {
        userList.innerHTML = "<p>No users found.</p>";
        return;
      }

      users.forEach(user => {
        let card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h3>${user.name}</h3>
          <p><strong>Skill Have:</strong> ${user.skillHave}</p>
          <p><strong>Skill Want:</strong> ${user.skillWant}</p>
        `;
        userList.appendChild(card);
      });
    }

    // Find exact matches
    function findMatches() {
      let users = JSON.parse(localStorage.getItem("users")) || [];
      let loggedInEmail = localStorage.getItem("loggedInEmail");
      let matchList = document.getElementById("matchList");
      matchList.innerHTML = "";

      if (!loggedInEmail) {
        matchList.innerHTML = "<p>Please sign in to find matches.</p>";
        return;
      }

      let currentUser = users.find(u => u.email === loggedInEmail);
      if (!currentUser) {
        matchList.innerHTML = "<p>User not found. Please sign in again.</p>";
        return;
      }

      let matches = users.filter(
        u =>
          u.email !== loggedInEmail &&
          u.skillHave.toLowerCase() === currentUser.skillWant.toLowerCase() &&
          u.skillWant.toLowerCase() === currentUser.skillHave.toLowerCase()
      );

      if (matches.length === 0) {
        matchList.innerHTML = "<p>No exact matches found yet.</p>";
        return;
      }

      matches.forEach(match => {
        let card = document.createElement("div");
        card.className = "card highlight"; // highlight class for styling
        card.innerHTML = `
          <h3>${match.name}</h3>
          <p><strong>They Can Teach:</strong> ${match.skillHave}</p>
          <p><strong>They Want to Learn:</strong> ${match.skillWant}</p>
          <p>ðŸŽ‰ Perfect Skill Swap Match!</p>
        `;
        matchList.appendChild(card);
      });
    }

    // Load directory on page load
    window.onload = loadUsers;
  </script>
</body>
</html>
